(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,n){e.exports=n(87)},37:function(e,t,n){},39:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(28),s=n.n(r),l=(n(37),n(39),n(7)),i=n(11),o=n(13),u=n(12),h=n(14),d=n(88),m=n(89),p=n(29),f=n.n(p),g=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).initChart=function(e,t){n.chart=new f.a(n.refs.ctx,{type:"line",data:{labels:t,datasets:[{data:e,fill:!0,borderColor:"#0c0c0c",backgroundColor:"#0001"}]},options:{animation:{duration:0},legend:{display:!1},title:{display:!0,text:"Graph",fontSize:16,fontColor:"#f0eeea"},responsive:!0,tooltips:{mode:"index",intersect:!1,displayColors:!1},hover:{mode:"nearest",intersect:!0},scales:{yAxes:[{ticks:{beginAtZero:!1}}]}}})},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.data.slice().reverse(),t=e.map(function(e,t){return"".concat(1*t+1,"m")}).reverse();this.initChart(e,t)}},{key:"componentDidUpdate",value:function(){var e=this.props.data.slice().reverse(),t=e.map(function(e,t){return"".concat(t+1,"m")}).reverse();this.chart.data.labels=t,this.chart.data.datasets[0].data=e,this.chart.update()}},{key:"render",value:function(){return c.a.createElement("div",{className:"graph-container"},c.a.createElement("canvas",{ref:"ctx",className:"graph-canvas"}))}}]),t}(a.Component),v=function(e){return c.a.createElement("div",{className:"schedule-item"},c.a.createElement("p",null,e.schedule.name),c.a.createElement("table",null,c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Ramp"),c.a.createElement("th",null,"Rate"),c.a.createElement("th",null,"Target"),c.a.createElement("th",null,"Hold")),e.schedule.ramps.map(function(e,t){return c.a.createElement("tr",{key:t},c.a.createElement("td",null,t+1),c.a.createElement("td",null,e.rate),c.a.createElement("td",null,e.target),c.a.createElement("td",null,e.hold))}))))},E=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"schedules-container"},this.props.schedules.map(function(e,t){return c.a.createElement(v,{schedule:e,key:t})}))}}]),t}(a.Component),b=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost:2222/api";Object(l.a)(this,e),this.url=n,this.getPackage=function(){return fetch("".concat(t.url,"/kiln/get-package"))},this.startFiring=function(e){return fetch("".concat(t.url,"/kiln/start-firing"),{headers:{"Content-Type":"application/json"},method:"post",body:JSON.stringify({schedule:e})})},this.stopFiring=function(){return fetch("".concat(t.url,"/kiln/stop-firing"))},this.getSchedules=function(){return fetch("".concat(t.url,"/get-schedules"))}},k=new b,w=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={scheduleID:0,schedule:null,waiting:!1},n.changeSelection=function(e){var t=e.target.value,a=null;n.props.state.schedules.forEach(function(e,n){e.id===t&&(a=e)}),n.setState({scheduleID:t,schedule:a})},n.startFiring=function(){if(n.setState({waiting:!0}),!n.state.schedule)return alert("Please select a schedule"),void n.setState({waiting:!1});k.startFiring(n.state.schedule).then(function(e){return e.json()}).then(function(e){console.log(e),alert(e.message)}).catch(function(e){console.log(e),alert(e.message)}).then(function(){n.setState({waiting:!1})})},n.stopFiring=function(){n.setState({waiting:!0}),k.stopFiring().then(function(e){return e.json()}).then(function(e){console.log(e),alert(e.message)}).catch(function(e){console.log(e),alert(e.message)}).then(function(){n.setState({waiting:!1})})},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){Object.keys(this.props.state.kiln.currentSchedule).length>0&&this.setState({scheduleID:this.props.state.kiln.currentSchedule.id,schedule:this.props.state.kiln.currentSchedule})}},{key:"render",value:function(){return c.a.createElement("div",{className:"controls-container"},c.a.createElement("div",{className:"controls"},c.a.createElement("p",null,"Kiln is currently ",this.props.state.kiln.isFiring?"on":"off"),c.a.createElement("br",null),c.a.createElement("select",{value:this.state.scheduleID,onChange:this.changeSelection},c.a.createElement("option",{value:0,disabled:!0},"Select Schedule"),this.props.state.schedules.map(function(e,t){return c.a.createElement("option",{value:e.id,key:t},e.name)})),c.a.createElement("div",{className:"start-stop-container"},c.a.createElement("button",{disabled:this.state.waiting,className:"start btn",onClick:this.startFiring},"Start"),c.a.createElement("button",{disabled:this.state.waiting,className:"stop btn",onClick:this.stopFiring},"Stop"))),c.a.createElement("div",{className:"preview"},this.state.schedule&&c.a.createElement(v,{schedule:this.state.schedule})))}}]),t}(a.Component),j=new b,S=function(){window.location.reload()},y=function(e){return Object.keys(e).map(function(t){return e[t]})},O=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={kiln:{temperatureLog:[],currentSchedule:{}},schedules:[]},n.updatePackage=function(){j.getPackage().then(function(e){return e.json()}).then(function(e){n.setState({kiln:e})}).catch(console.log)},n.updateSchedules=function(){j.getSchedules().then(function(e){return e.json()}).then(function(e){var t=y(e);n.setState({schedules:t})}).catch(console.log)},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.updatePackage(),this.updateSchedules(),setInterval(this.updatePackage,1e4)}},{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"menu"},c.a.createElement("div",{className:"temperature"},this.state.kiln.temperature,"\xbaF"),c.a.createElement(d.a,{className:"graph",to:"/"},"Graph"),c.a.createElement(d.a,{className:"schedules",to:"/schedules"},"Schedules"),c.a.createElement(d.a,{className:"controls",to:"/controls"},"Controls"),c.a.createElement(d.a,{className:"settings",to:"/settings"},"Settings"),c.a.createElement("button",{onClick:S,className:"refresh-button"},c.a.createElement("svg",{"aria-hidden":"true","data-prefix":"fas","data-icon":"redo",className:"",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},c.a.createElement("path",{fill:"currentColor",d:"M500.333 0h-47.411c-6.853 0-12.314 5.729-11.986 12.574l3.966 82.759C399.416 41.899 331.672 8 256.001 8 119.34 8 7.899 119.526 8 256.187 8.101 393.068 119.096 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-33.971-33.971c-4.466-4.466-11.64-4.717-16.38-.543C341.308 415.448 300.606 432 256 432c-97.267 0-176-78.716-176-176 0-97.267 78.716-176 176-176 60.892 0 114.506 30.858 146.099 77.8l-101.525-4.865c-6.845-.328-12.574 5.133-12.574 11.986v47.411c0 6.627 5.373 12 12 12h200.333c6.627 0 12-5.373 12-12V12c0-6.627-5.373-12-12-12z"})))),c.a.createElement("div",{className:"body"},c.a.createElement(m.a,{exact:!0,path:"/",render:function(){return c.a.createElement(g,{data:e.state.kiln.temperatureLog})}}),c.a.createElement(m.a,{exact:!0,path:"/schedules",render:function(){return c.a.createElement(E,{schedules:e.state.schedules})}}),c.a.createElement(m.a,{exact:!0,path:"/controls",render:function(){return c.a.createElement(w,{state:e.state})}}),c.a.createElement(m.a,{exact:!0,path:"/settings",render:function(){return c.a.createElement("div",{className:"settings-container"},"settings")}})))}}]),t}(a.Component),N=n(90);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(N.a,null,c.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[32,2,1]]]);
//# sourceMappingURL=main.b93b899e.chunk.js.map